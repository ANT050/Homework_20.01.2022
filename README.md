<a id="return"></a>

<center>

# Знакомство с языком Python (семинары)

## Урок 7. Python: от простого к практике

</center>



<u>***Задача 1:***</u>

Продолжить работу над телефонным справочником, котрую начали на семинаре добавить функции: сохранить файл, изменить контакт, удалить контакт и найти контакт

СОБЛЮДАЯ АРХИТЕКТУРУ (модули view и model - не пересекаются).

---

Ко мне относилось выполнение модуля CONTROLLER, ниже идет описание функций.

---

**Функция чтения справочника из файла**

<img src="images\open_reference.jpg" height="201" width="962"/>

file_name: str = "test.txt" - путь к файлу, в котором хранятся контакты. Функция read_reference_from_file читает контакты из данного файла. Если файл нет, то функция создает пустой файл с указанным именем файла. Аргумент для функции read_reference_from_file является необязательным, т.е. при вызове функции, если имя файла не передано, то значение по умолчанию "test.txt ", чтобы прочитать контакты из файла.

list – возвращает список словарей, где каждый словарь представляет ссылочный объект.

reference - содержит список ссылочных объектов (каждый ссылочный объект представляет собой словарь, содержащий данные для ссылки). 

status - значение, которое указывает был ли поиск успешным или нет.

model.read_reference_from_file(file_name) - вызов функции, которая используется для чтения контактов из файла. Принимает один необязательный аргумент - file_name, который представляет собой строку, представляющую путь к файлу, в котором хранятся контакты. Если аргумент не указан, считывание происходит из файла по умолчанию "test.txt ". Если  чтение было успешным, то статус будет True, если нет - False.

И далее идет проверка: если status = True - значит, что считывание прошло успешно, вызывается функция view.display_message, который отображает пользователю сообщение, что контакты были успешно прочитаны из файла (34mЧтение справочника из файла {file_name} выполнено успешно), если status = False - значит, что чтение не было успешным, вызывается метод self.view.display_error, который отображает пользователю сообщения об ошибке, что при попытке прочитать контакты из файла произошла ошибка (34mОшибка чтения справочника из файла).

return reference - возвращает список контактов, которые считываются из файла, или пустой список, если произошла ошибка или файл пуст.

**Функция записи справочника в файл**

<img src="images\save_reference.jpg" height="177" width="852"/>

file_name: str = "test.txt" - путь к файлу, в котором хранятся контакты. Этот аргумент представляет путь к файлу, в котором должны храниться контакты. Если аргмент не передан, имя файла по умолчанию равно "test.txt ".

reference -  необязательный аргумент, представляет собой список словарей, представляющих ссылки, которые должны быть записаны в файл. Если аргумент не передан, метод использует атрибут model.reference.

None - не возвращает ничего

status - значение, которое была ли запись ссылок в файл успешной или нет.

model.write_reference_to_file(file_name, reference) - вызов метода, который записывает ссылки в файл. Принимает два необязательных аргумент - file_name, reference. Если  запись в файл была успешной, то статус будет True, если нет - False.

И далее идет проверка: если status = True - значит, запись прошла успешно, вызывается метод view.display_message, который отображает пользователю сообщения, что справочник был успешно сохранен (Справочник успешно сохранен). Аргумент file_name передается в сообщение, чтобы сообщить пользователю, в какой файл были записаны ссылки, если status = False – значит при записи ссылок в файл произошла ошибка, вызывается функция view.display_error, который сообщает пользователю сообщения об ошибке, указывающего на то, что произошла ошибка сохранения справочника (Ошибка сохранения справочника). Аргумент file_name передается в сообщение об ошибке, чтобы сообщить пользователю, в каком файле произошла ошибка. 

---

**Функция просмотра всех контактов**

<img src="images\show_contacts.jpg" height="153" width="842"/>

list - возвращает список словарей, где каждый словарь представляет ссылочный объект

reference - содержит список ссылочных объектов (каждый ссылочный объект представляет собой словарь, содержащий данные для ссылки). 

model.get_reference(count) - вызов метода, который используется для извлечения контактов из каталога на основе заданного количества. Принимает один необязательный аргумент - count, который представляет собой количество контактов, которые должны быть извлечены из каталога. Если аргумент count не передан или передан как 0, он возвращает все контакты, доступные в каталоге. Если запустить без параметра или передав 0, статус будет True, если количество записей меньше чем запрошенное - False. 

И далее идет проверка: если status = False - означает, что извлечение не было успешным и количество записей меньше запрошенного, вызывается функция view.display_error, который указывает, что количество записей меньше запрошенного и отображает сообщения об ошибке (Внимание: Количество записей в справочнике меньше запрошенного). 

return reference - возвращает список ссылочных объектов, которые извлекаются на основе предоставленного количества, или все ссылки, доступные в каталоге, если количество не передано или передано как 0.

---

**Функция добавления нового контакта**

<img src="images\add_contact.jpg" height="201" width="1026"/>

record - словарь, содержащий информацию о добавляемом контакте.

list  - возвращает список. 

reference - новый контакт(элемент), который добавляется в модель.
model.add_reference(record) - вызывает метод, который используется для добавления нового контакта (в нашем случае "record") в модель. Если добавление прошло успешно, статус будет True, если нет - False.

И далее идет проверка: Если status = True -  добавление контакта прошло успешно, вызывается метод view.display_message, который используется для отображения сообщения (Контакт успешно создан, нажмите сохранить для добавления в справочник), если status = False - добавление контакта не было успешным, вызывается функция view.display_error, который используется для отображения сообщения об ошибке (Создать контакт не удалось). 

return reference - возвращает список

---

**Функция изменения контакта**

<img src="images\update_contact.jpg" height="197" width="1163"/>

list - возвращает список.

reference - содержит список ссылочных объектов (ссылочный объект представляет собой словарь, содержащий данные для ссылки)

status - значение, которое указывает, элемент обновился или нет

model.update_reference(id, record) - вызов метода, который используется для обновления контакта в каталоге. Принимает два аргумента: id - идентификатор контакта, который необходимо обновить, и record - словарь, который содержит новые данные для контакта. Если обновление прошло успешно, статус будет True, если нет - False.
И далее идет проверка: если status = True - обновление контакта прошло успешно, вызывается метод view.display_message, который используется для отображения сообщения (Контак с id успешно обновлен, нажмите сохранить для добавления в справочник)

return reference - возвращает список.

---

**# Функция удаления контакта по ID**

<img src="images\delete_contact.jpg" height="195" width="1139"/>

list - возвращает список словарей, где каждый словарь представляет ссылочный объект.

reference – обновленный список ссылок после удаления контакта.

status - значение, которое указывает, элемент удаляется или нет.

model.delete_reference(id) - вызовает метод, который используется для удаления контакта из каталога по ID. Если удаление прошло успешно, статус будет True, если нет - False.
И далее идет проверка: Если status=True - удаление контакта прошло успешно, вызывается метод view.display_message, который используется для отображения сообщения (Контак с id успешно удален, нажмите сохранить для добавления в справочник.

return reference - возвращает список.

---

**Функция нахождения в справочнике контакта по ID**

<img src="images\find_contact_by_id.jpg" height="190" width="768"/>

(id, dict) - возвращает кортеж, содержащий целое число (id) и словарь (dict).

record - словарь, содержащий контактные данные человека, чей id был передан в качестве аргумента функции.

status - значение, которое указывает был ли поиск успешным или нет.

model.find_record_from_id(id) - вызов метода, который используется для поиска контакта в каталоге на основе заданного ID. Принимает один аргумент - id, который представляет собой id контакта, который должен быть найден в каталоге. Если поиск контакта по ID прошел успешно, статус будет True, если нет - False.
И далее идет проверка: Если status = True - поиск был успешным и совпадение было найдено, вызывается функция view.display_message, который используется для отображения сообщения (Контакт с id успешно найден), если status = False - поиск не был успешным и совпадений найдено не было, вызывается функция view.display_error, которая указывает, что с предоставленным параметром поиска совпадений не было найдено, отображает сообщения об ошибке (Ошибка поиска: контакт не найден).

return id, record - возвращает кортеж, содержащий id и словарь.

---

**Функция нахождения в справочнике контакта с указанными параметрами**

<img src="images\find_contact.jpg" height="205" width="998"/>

list - возвращает список.
reference - содержит список ссылочных объектов (каждый ссылочный объект представляет собой словарь, содержащий данные для ссылки).

status - значение, которое указывает был ли поиск успешным или нет.

model.find_records(parameters) - вызов метода, который используется для поиска контакта в каталоге на основе заданных параметров. Принимает один аргумент - parameters, который представляет собой словарь. Словарь содержит один или несколько ключей, которые используются в качестве параметров поиска для поиска контакта в каталоге. Если поиск контакта прошел успешно, статус будет True, если нет - False.

И далее идет проверка: Если status = True - поиск был успешным и совпадения были найдены, вызывается метод view.display_message, который используется для отображения сообщения (Контакт найден успешно), если status = False, то поиск не был успешным и совпадений найдено не было, вызывается фукция view.display_error, который указывает, что с предоставленными параметрами поиска совпадений не было найдено и отображет сообщения об ошибке (Ошибка поиска контакта с параметрами : запись не найдена).

return reference возвращает список ссылочных объектов, которые соответствуют предоставленным параметрам поиска.

---

**Функция обработки ввода команд**

Функция input_handler обрабатывает пользовательский ввод для выполнения различных действий, связанных со списком контактов. На вход принимет целое число в качестве аргумента и далее идет проверка, чтобы определить, какое действие выполнить.

<img src="images\input_handler.jpg" height="888" width="679"/>

---

:point_right: [Перейти к решению]( "Открыть")

---

:point_right: [Вначало](#return "Вернуться вначало")
